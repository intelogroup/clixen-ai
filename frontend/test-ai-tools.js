console.log("Testing MCP AI tools discovery"); const { spawn } = require("child_process"); const mcpProcess = spawn("node", ["node_modules/n8n-mcp/dist/mcp/index.js"], { stdio: ["pipe", "pipe", "pipe"], env: { ...process.env, N8N_MCP_CONFIG: "n8n-mcp-config.json" }, shell: true }); mcpProcess.stdout.on("data", (data) => { if (data.toString().includes("running on stdio transport")) { const request = { jsonrpc: "2.0", id: Date.now(), method: "tools/call", params: { name: "list_ai_tools", arguments: {} } }; mcpProcess.stdin.write(JSON.stringify(request) + "\n"); setTimeout(() => mcpProcess.kill(), 5000); } }); mcpProcess.stdout.on("data", (data) => { const str = data.toString(); if (str.includes("result")) { console.log("AI Tools Response:", str); } });
